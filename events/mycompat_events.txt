namespace = mycompat_events

planet_event = {
	id = mycompat_events.1
	hide_window = yes
	is_triggered_only = no
	mean_time_to_happen = { days = 30 }
	pre_triggers = {
		has_owner = yes
	}
	trigger = {
		MYCOMPAT_st_is_enabled = yes
	}
	immediate = {
		if = {
			limit = { not = { is_variable_set = MYCOMPAT_v_converted_pops } }
			set_variable = { which = MYCOMPAT_v_converted_pops value = 0 }
		}
		every_owned_pop = {
			limit = { is_unemployed = yes }
			prev = {
				change_variable = { which = MYCOMPAT_v_converted_pops value = 1 }
			}
			kill_pop = yes
		}
		
		MYCOMPAT_agse_planet = yes
	}
}

# for debug purpose
planet_event = {
	id = mycompat_events.500
	hide_window = no
	is_triggered_only = yes
}

ship_event = {
	id = mycompat_events.501
	hide_window = no
	is_triggered_only = yes
}

fleet_event = {
	id = mycompat_events.502
	hide_window = no
	is_triggered_only = yes
}

country_event = {
	id = mycompat_events.503
	hide_window = no
	is_triggered_only = yes
}